<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Visita In Loco</title>
    <link rel="stylesheet" href="style.css/style.css"> <!-- Link para o seu CSS -->
    <script src="script.js" defer></script> <!-- Link para seu JavaScript -->
</head>

<body>
    <header>
        <h1>Ministério do Esporte</h1>
        <img src="img/Imagem1.png" alt="Logo Ministério do Esporte" width="10%">
    </header>

    <main class="content">
        <h2>Formulário de Visita In Loco</h2>

        <form id="visitaInLocoForm" enctype="multipart/form-data">
            <!-- Informações da Instituição -->
            <fieldset>
                <legend>Informações da Instituição</legend>
                <div class="form-row">
                    <label for="instituicao">Instituição:</label>
                    <input type="text" id="instituicao" name="instituicao" required>
                </div>
                <div class="form-row">
                    <label for="cnpj">CNPJ:</label>
                    <input type="text" id="cnpj" name="cnpj" required>
                </div>
                <div class="form-row">
                    <label for="presidente">Presidente:</label>
                    <input type="text" id="presidente" name="presidente">
                </div>
                <div class="form-row">
                    <label for="termoFomento">Nº Termo de Fomento:</label>
                    <input type="text" id="termoFomento" name="termoFomento">
                </div>
                <div class="form-row">
                    <label for="endereco">Endereço:</label>
                    <input type="text" id="endereco" name="endereco" required>
                </div>
                <div class="form-row">
                    <label for="objeto">Objeto:</label>
                    <input type="text" id="objeto" name="objeto" required>
                </div>
                <div class="form-row">
                    <label for="valorPactuado">Valor Pactuado:</label>
                    <input type="text" id="valorPactuado" name="valorPactuado" required>
                </div>
                <div class="form-row">
                    <label for="processoSEI">Processo SEI:</label>
                    <input type="text" id="processoSEI" name="processoSEI" required>
                </div>
                <div class="form-row">
                    <label for="vigencia">Vigência:</label>
                    <input type="text" id="vigencia" name="vigencia" required>
                </div>
                <div class="form-row">
                    <label for="inicioAtividades">Início das Atividades:</label>
                    <input type="date" id="inicioAtividades" name="inicioAtividades" required>
                </div>
                <div class="form-row">
                    <label for="totalNucleos">Total de Núcleos:</label>
                    <input type="number" id="totalNucleos" name="totalNucleos" required>
                </div>
                <div class="form-row">
                    <label for="totalBeneficiados">Total de Beneficiados:</label>
                    <input type="number" id="totalBeneficiados" name="totalBeneficiados" required>
                </div>
            </fieldset>

            <!-- Núcleos a serem Visitados -->
            <fieldset>
                <legend>Núcleos a serem Visitados</legend>
                <div class="form-row">
                    <label for="nomeNucleo">Nome:</label>
                    <input type="text" id="nomeNucleo" name="nomeNucleo" required>
                </div>
                <div class="form-row">
                    <label for="enderecoNucleo">Endereço:</label>
                    <input type="text" id="enderecoNucleo" name="enderecoNucleo" required>
                </div>
                <div class="form-row">
                    <label for="recursosHumanos">Recursos Humanos:</label>
                    <textarea id="recursosHumanos" name="recursosHumanos" required></textarea>
                </div>
            </fieldset>

            <!-- Acompanhamento das Atividades -->
            <fieldset>
                <legend>Acompanhamento das Atividades</legend>
                <div class="form-row">
                    <label for="acompanhamentoAtividades">Como é realizado o acompanhamento das atividades e gerenciamento nos núcleos?</label>
                    <textarea id="acompanhamentoAtividades" name="acompanhamentoAtividades"></textarea>
                </div>
                <div class="form-row">
                    <label for="acompanhamentoFrequencia">Como é realizado o acompanhamento da frequência dos recursos humanos?</label>
                    <textarea id="acompanhamentoFrequencia" name="acompanhamentoFrequencia"></textarea>
                </div>
            </fieldset>

            <!-- Dados do Responsável pela Visita -->
            <fieldset>
                <legend>Dados do Responsável pela Visita</legend>
                <div class="form-row">
                    <label for="nomeResponsavel">Nome:</label>
                    <input type="text" id="nomeResponsavel" name="nomeResponsavel" required>
                </div>
                <div class="form-row">
                    <label for="funcaoResponsavel">Função:</label>
                    <input type="text" id="funcaoResponsavel" name="funcaoResponsavel" required>
                </div>
                <div class="form-row">
                    <label for="localData">Local/Data:</label>
                    <input type="text" id="localData" name="localData" required>
                </div>
            </fieldset>

            <!-- Questionário para Beneficiados -->
            <fieldset>
                <legend>Questionário para Beneficiados</legend>
                <div class="form-row">
                    <label for="comoSoubeProjeto">Como ficou sabendo do projeto?</label>
                    <textarea id="comoSoubeProjeto" name="comoSoubeProjeto"></textarea>
                </div>
                <div class="form-row">
                    <label for="comoOcorrendoInscricao">Como ocorreu a inscrição?</label>
                    <textarea id="comoOcorrendoInscricao" name="comoOcorrendoInscricao"></textarea>
                </div>
                <div class="form-row">
                    <label for="recebeuUniforme">Recebeu o uniforme com logo?</label>
                    <input type="radio" id="uniformeSim" name="uniforme" value="sim"><label for="uniformeSim">SIM</label>
                    <input type="radio" id="uniformeNao" name="uniforme" value="nao"><label for="uniformeNao">NÃO</label>
                </div>
                <div class="form-row">
                    <label for="tempoParticipa">A quanto tempo participa?</label>
                    <input type="text" id="tempoParticipa" name="tempoParticipa">
                </div>
                <div class="form-row">
                    <label for="quantasVezes">Quantas vezes por semana frequenta e horário?</label>
                    <input type="text" id="quantasVezes" name="quantasVezes">
                </div>
                <div class="form-row">
                    <label for="comoChega">Como faz para chegar ao local?</label>
                    <textarea id="comoChega" name="comoChega"></textarea>
                </div>
                <div class="form-row">
                    <label for="respondeListaChamada">Responde a lista de chamada?</label>
                    <input type="radio" id="listaChamadaSim" name="listaChamada" value="sim"><label for="listaChamadaSim">SIM</label>
                    <input type="radio" id="listaChamadaNao" name="listaChamada" value="nao"><label for="listaChamadaNao">NÃO</label>
                </div>
                <div class="form-row">
                    <label for="professor">O professor é o mesmo desde o início do Projeto?</label>
                    <input type="radio" id="professorSim" name="professor" value="sim"><label for="professorSim">SIM</label>
                    <input type="radio" id="professorNao" name="professor" value="nao"><label for="professorNao">NÃO</label>
                </div>
            </fieldset>
             <!-- Novo Campo de Anotações -->
             <fieldset>
                <legend>Anotações</legend>
                <div class="form-row">
                    <label for="anotacoes">Adicione suas anotações aqui:</label>
                    <textarea id="anotacoes" name="anotacoes"></textarea>
                </div>
            </fieldset>
            <fieldset>
                <legend>Imagens da Vistoria</legend>
                <div class="form-row">
                    <label for="imagensVistoria">Insira as imagens da vistoria:</label>
                    <input type="file" id="imagensVistoria" name="imagensVistoria[]" accept="image/*" multiple required>
                </div>
            </fieldset>

            <!-- Enviar -->
            <button type="submit">Enviar</button>
        </form>
    </main>

    <script>
        document.getElementById('visitaInLocoForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // Previne o comportamento padrão do formulário
            
            const formData = new FormData(this); // Cria um FormData com os dados do formulário
            try {
                const response = await fetch('/submit', {
                    method: 'POST',
                    body: formData // Envia os dados via POST
                });

                if (response.ok) {
                    alert("Formulário enviado com sucesso!");
                    window.location.href = '/confirmacao'; // Redireciona para a página de confirmação
                } else {
                    const result = await response.text();
                    alert(`Erro ao enviar o formulário: ${result}`);
                }
            } catch (error) {
                console.error("Erro ao enviar o formulário:", error);
                alert("Ocorreu um erro ao tentar enviar o formulário.");
            }
        });
    </script>
</body>
</html>
